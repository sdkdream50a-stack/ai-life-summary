<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- SEO Meta Tags -->
  <title>AI ì†Œìš¸ íƒ€ì… ìœ„ì ¯ - ë¸”ë¡œê·¸/SNS í”„ë¡œí•„ì— ì¶”ê°€í•˜ê¸° | AI Test Lab</title>
  <meta name="description" content="ë‹¹ì‹ ì˜ AI ì†Œìš¸ íƒ€ì…ì„ ë¸”ë¡œê·¸ë‚˜ SNS í”„ë¡œí•„ì— í‘œì‹œí•˜ì„¸ìš”! ì¹´ë“œ, ë°°ì§€, ë¯¸ë‹ˆ ìŠ¤íƒ€ì¼ ì¤‘ ì„ íƒí•˜ì—¬ ì„ë² ë“œ ì½”ë“œë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.">
  <meta name="keywords" content="AI ì†Œìš¸ íƒ€ì… ìœ„ì ¯, í”„ë¡œí•„ ìœ„ì ¯, ë¸”ë¡œê·¸ ìœ„ì ¯, ì†Œìš¸ íƒ€ì… ë°°ì§€">
  <link rel="canonical" href="https://smartaitest.com/widget/">

  <!-- Open Graph -->
  <meta property="og:title" content="AI ì†Œìš¸ íƒ€ì… ìœ„ì ¯ - í”„ë¡œí•„ì— ì¶”ê°€í•˜ê¸°">
  <meta property="og:description" content="ë‹¹ì‹ ì˜ ì†Œìš¸ íƒ€ì…ì„ ë¸”ë¡œê·¸ë‚˜ SNSì— í‘œì‹œí•˜ì„¸ìš”!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://smartaitest.com/widget/">
  <meta property="og:image" content="https://smartaitest.com/images/widget-og.png">
  <meta property="og:locale" content="ko_KR">
  <meta property="og:site_name" content="AI Test Lab">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="AI ì†Œìš¸ íƒ€ì… ìœ„ì ¯">
  <meta name="twitter:description" content="ë‹¹ì‹ ì˜ ì†Œìš¸ íƒ€ì…ì„ í”„ë¡œí•„ì— ì¶”ê°€í•˜ì„¸ìš”!">
  <meta name="twitter:image" content="https://smartaitest.com/images/widget-og.png">

  <!-- Alternate Languages -->
  <link rel="alternate" hreflang="ko" href="https://smartaitest.com/widget/">
  <link rel="alternate" hreflang="en" href="https://smartaitest.com/widget/?lang=en">
  <link rel="alternate" hreflang="x-default" href="https://smartaitest.com/widget/">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Pretendard Font -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@latest/dist/web/variable/pretendardvariable-dynamic-subset.min.css">

  <!-- Styles -->
  <link rel="stylesheet" href="../css/widget.css">

  <style>
    body {
      font-family: 'Pretendard Variable', Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
    }

    /* Share options grid */
    .share-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      margin-bottom: 1rem;
    }

    .share-option {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(99, 102, 241, 0.1);
      border-radius: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .share-option:hover {
      border-color: rgba(99, 102, 241, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
    }

    .share-option.active {
      border-color: #6366f1;
      background: rgba(99, 102, 241, 0.1);
    }

    .share-option-icon {
      font-size: 1.5rem;
    }

    .share-option-name {
      font-size: 0.75rem;
      font-weight: 600;
      color: #1e293b;
    }

    .share-option-desc {
      font-size: 0.625rem;
      color: #64748b;
      text-align: center;
    }

    /* Code area */
    .code-area {
      position: relative;
      margin-top: 1rem;
    }

    .code-area pre {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(99, 102, 241, 0.15);
      border-radius: 1rem;
      padding: 1rem;
      padding-right: 5rem;
      overflow-x: auto;
      font-family: 'SF Mono', Monaco, Consolas, monospace;
      font-size: 0.75rem;
      color: #6366f1;
      line-height: 1.5;
      white-space: pre-wrap;
      word-break: break-all;
    }

    .code-area .copy-btn {
      position: absolute;
      top: 0.75rem;
      right: 0.75rem;
      padding: 0.5rem 1rem;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      color: #fff;
      border: none;
      border-radius: 0.75rem;
      font-size: 0.75rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }

    .code-area .copy-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
    }

    .code-area .copy-btn.copied {
      background: linear-gradient(135deg, #22c55e, #10b981);
      box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
    }

    /* Direct link input */
    .link-input-group {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .link-input {
      flex: 1;
      padding: 0.75rem 1rem;
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(99, 102, 241, 0.15);
      border-radius: 0.75rem;
      font-size: 0.75rem;
      color: #6366f1;
      outline: none;
    }

    .link-input:focus {
      border-color: #6366f1;
    }

    /* Download button */
    .download-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      width: 100%;
      padding: 1rem;
      margin-top: 1rem;
      background: linear-gradient(135deg, #6366f1, #8b5cf6);
      color: #fff;
      border: none;
      border-radius: 1rem;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
    }

    .download-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
    }

    /* Hero banner */
    .widget-hero {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(236, 72, 153, 0.1));
      border-radius: 1.5rem;
      padding: 1.5rem;
      margin-bottom: 2rem;
      text-align: center;
    }

    .widget-hero-title {
      font-size: 1.25rem;
      font-weight: 700;
      background: linear-gradient(135deg, #6366f1, #8b5cf6, #ec4899);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 0.5rem;
    }

    .widget-hero-desc {
      font-size: 0.875rem;
      color: #64748b;
      line-height: 1.6;
    }

    /* Help box */
    .help-box {
      background: rgba(99, 102, 241, 0.05);
      border: 1px solid rgba(99, 102, 241, 0.1);
      border-radius: 1rem;
      padding: 1rem;
    }

    .help-box-title {
      font-size: 0.875rem;
      font-weight: 600;
      color: #6366f1;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .help-box-content {
      font-size: 0.8rem;
      color: #64748b;
      line-height: 1.8;
    }

    .help-box-content ol {
      padding-left: 1.25rem;
      margin: 0;
    }

    .help-box-content li {
      margin-bottom: 0.25rem;
    }

    @media (max-width: 480px) {
      .share-options {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "AI ì†Œìš¸ íƒ€ì… ìœ„ì ¯",
    "description": "AI ì†Œìš¸ íƒ€ì…ì„ ë¸”ë¡œê·¸ë‚˜ SNS í”„ë¡œí•„ì— ì¶”ê°€í•˜ëŠ” ìœ„ì ¯ ìƒì„±ê¸°",
    "url": "https://smartaitest.com/widget/",
    "isPartOf": {
      "@type": "WebSite",
      "name": "AI Test Lab",
      "url": "https://smartaitest.com"
    }
  }
  </script>
</head>
<body class="generator-container">
  <!-- Header -->
  <header class="generator-header">
    <a href="../" class="back-link" aria-label="Back to home">
      <svg width="24" height="24" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
      </svg>
    </a>
    <h1 class="header-title" data-i18n="widgetGenerator">Widget Generator</h1>
    <div style="width: 40px;"></div>
  </header>

  <!-- Content -->
  <main class="generator-content">
    <!-- Hero Banner -->
    <div class="widget-hero">
      <div class="widget-hero-title" data-i18n="heroTitle">Show Your Soul Type!</div>
      <div class="widget-hero-desc" data-i18n="heroDesc">
        Display your AI Soul Type on your blog, Notion, or website.<br>
        Create a widget and share your unique personality!
      </div>
    </div>

    <!-- Style Selector -->
    <section class="generator-section">
      <h2 class="generator-section-title">
        <span>ğŸ¨</span>
        <span data-i18n="selectStyle">Select Style</span>
      </h2>
      <div class="style-selector">
        <button class="style-option active" data-style="card">
          <div class="style-option-icon">ğŸƒ</div>
          <div class="style-option-name" data-i18n="cardStyle">Card</div>
          <div class="style-option-size">300Ã—200</div>
        </button>
        <button class="style-option" data-style="badge">
          <div class="style-option-icon">ğŸ·ï¸</div>
          <div class="style-option-name" data-i18n="badgeStyle">Badge</div>
          <div class="style-option-size">200Ã—60</div>
        </button>
        <button class="style-option" data-style="mini">
          <div class="style-option-icon">âœ¨</div>
          <div class="style-option-name" data-i18n="miniStyle">Mini</div>
          <div class="style-option-size">100Ã—100</div>
        </button>
      </div>
    </section>

    <!-- Type Selector -->
    <section class="generator-section">
      <h2 class="generator-section-title">
        <span>ğŸ¦Š</span>
        <span data-i18n="selectType">Select Type</span>
      </h2>
      <div class="type-selector">
        <!-- Rendered by JS -->
      </div>
    </section>

    <!-- Preview -->
    <section class="generator-section">
      <h2 class="generator-section-title">
        <span>ğŸ‘ï¸</span>
        <span data-i18n="preview">Preview</span>
      </h2>
      <div class="preview-area" id="preview-area">
        <!-- Rendered by JS -->
      </div>
    </section>

    <!-- Share Options -->
    <section class="generator-section">
      <h2 class="generator-section-title">
        <span>ğŸ“¤</span>
        <span data-i18n="shareMethod">How to Share</span>
      </h2>
      <div class="share-options">
        <button class="share-option active" data-share="embed">
          <div class="share-option-icon">ğŸ”—</div>
          <div class="share-option-name" data-i18n="embedOption">Embed Code</div>
          <div class="share-option-desc" data-i18n="embedDesc">For blogs & websites</div>
        </button>
        <button class="share-option" data-share="link">
          <div class="share-option-icon">ğŸŒ</div>
          <div class="share-option-name" data-i18n="linkOption">Direct Link</div>
          <div class="share-option-desc" data-i18n="linkDesc">Copy & share anywhere</div>
        </button>
        <button class="share-option" data-share="image">
          <div class="share-option-icon">ğŸ–¼ï¸</div>
          <div class="share-option-name" data-i18n="imageOption">Save Image</div>
          <div class="share-option-desc" data-i18n="imageDesc">Download as PNG</div>
        </button>
        <button class="share-option" data-share="sns">
          <div class="share-option-icon">ğŸ“±</div>
          <div class="share-option-name" data-i18n="snsOption">Share to SNS</div>
          <div class="share-option-desc" data-i18n="snsDesc">Twitter, Facebook</div>
        </button>
      </div>

      <!-- Embed Code (default) -->
      <div id="share-embed" class="share-content">
        <div class="code-area">
          <button class="copy-btn" data-copy="embed" data-i18n="copy">Copy</button>
          <pre><code id="embed-code"><!-- Generated by JS --></code></pre>
        </div>
      </div>

      <!-- Direct Link -->
      <div id="share-link" class="share-content" style="display: none;">
        <div class="link-input-group">
          <input type="text" class="link-input" id="direct-link" readonly>
          <button class="copy-btn" data-copy="link" data-i18n="copy">Copy</button>
        </div>
      </div>

      <!-- Image Download -->
      <div id="share-image" class="share-content" style="display: none;">
        <button class="download-btn" id="download-btn">
          <span>ğŸ“¥</span>
          <span data-i18n="downloadImage">Download as Image</span>
        </button>
        <p style="font-size: 0.75rem; color: #64748b; text-align: center; margin-top: 0.75rem;" data-i18n="imageNote">
          Save as PNG and use on Instagram, KakaoTalk profile, etc.
        </p>
      </div>

      <!-- SNS Share -->
      <div id="share-sns" class="share-content" style="display: none;">
        <div style="display: flex; gap: 0.75rem; justify-content: center;">
          <button class="download-btn" style="flex: 1; max-width: 150px;" id="share-twitter">
            <span>ğŸ¦</span>
            <span>Twitter</span>
          </button>
          <button class="download-btn" style="flex: 1; max-width: 150px;" id="share-facebook">
            <span>ğŸ“˜</span>
            <span>Facebook</span>
          </button>
        </div>
      </div>
    </section>

    <!-- Instructions -->
    <section class="generator-section">
      <div class="help-box">
        <div class="help-box-title">
          <span>ğŸ’¡</span>
          <span data-i18n="howToUse">How to Use</span>
        </div>
        <div class="help-box-content">
          <ol data-i18n-html="instructionsList">
            <li>Select your preferred widget style (Card/Badge/Mini)</li>
            <li>Choose your soul type from the test result</li>
            <li>Pick a sharing method and copy or download</li>
            <li>Paste into your blog, Notion, or website!</li>
          </ol>
        </div>
      </div>
    </section>

    <!-- CTA -->
    <section class="generator-section" style="text-align: center;">
      <p style="font-size: 0.875rem; color: #64748b; margin-bottom: 1rem;" data-i18n="ctaText">
        Don't know your soul type yet?
      </p>
      <a href="../soul-type/" class="download-btn" style="display: inline-flex; text-decoration: none;">
        <span>âœ¨</span>
        <span data-i18n="ctaButton">Take the Soul Type Test</span>
      </a>
    </section>
  </main>

  <!-- Scripts -->
  <script src="../js/soul-types.js"></script>
  <script src="../js/widget-embed.js"></script>

  <!-- html2canvas for image download -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

  <script>
    // i18n translations
    const i18n = {
      ko: {
        widgetGenerator: 'ìœ„ì ¯ ìƒì„±ê¸°',
        heroTitle: 'ë‚˜ë§Œì˜ ì†Œìš¸ íƒ€ì…ì„ ë½ë‚´ë³´ì„¸ìš”!',
        heroDesc: 'ë¸”ë¡œê·¸, ë…¸ì…˜, ì›¹ì‚¬ì´íŠ¸ì— AI ì†Œìš¸ íƒ€ì…ì„ í‘œì‹œí•˜ì„¸ìš”.<br>ìœ„ì ¯ì„ ë§Œë“¤ì–´ ë‚˜ë§Œì˜ ê°œì„±ì„ ê³µìœ í•´ë³´ì„¸ìš”!',
        selectStyle: 'ìŠ¤íƒ€ì¼ ì„ íƒ',
        cardStyle: 'ì¹´ë“œ',
        badgeStyle: 'ë°°ì§€',
        miniStyle: 'ë¯¸ë‹ˆ',
        selectType: 'íƒ€ì… ì„ íƒ',
        preview: 'ë¯¸ë¦¬ë³´ê¸°',
        shareMethod: 'ê³µìœ  ë°©ë²•',
        embedOption: 'ì„ë² ë“œ ì½”ë“œ',
        embedDesc: 'ë¸”ë¡œê·¸/ì›¹ì‚¬ì´íŠ¸ìš©',
        linkOption: 'ì§ì ‘ ë§í¬',
        linkDesc: 'ì–´ë””ì„œë“  ê³µìœ  ê°€ëŠ¥',
        imageOption: 'ì´ë¯¸ì§€ ì €ì¥',
        imageDesc: 'PNGë¡œ ë‹¤ìš´ë¡œë“œ',
        snsOption: 'SNS ê³µìœ ',
        snsDesc: 'íŠ¸ìœ„í„°, í˜ì´ìŠ¤ë¶',
        copy: 'ë³µì‚¬',
        downloadImage: 'ì´ë¯¸ì§€ë¡œ ë‹¤ìš´ë¡œë“œ',
        imageNote: 'PNGë¡œ ì €ì¥í•´ì„œ ì¸ìŠ¤íƒ€ê·¸ë¨, ì¹´ì¹´ì˜¤í†¡ í”„ë¡œí•„ ë“±ì— ì‚¬ìš©í•˜ì„¸ìš”.',
        howToUse: 'ì‚¬ìš© ë°©ë²•',
        instructionsList: '<li>ì›í•˜ëŠ” ìœ„ì ¯ ìŠ¤íƒ€ì¼ì„ ì„ íƒí•˜ì„¸ìš” (ì¹´ë“œ/ë°°ì§€/ë¯¸ë‹ˆ)</li><li>í…ŒìŠ¤íŠ¸ ê²°ê³¼ì—ì„œ ë‚˜ì˜¨ ì†Œìš¸ íƒ€ì…ì„ ì„ íƒí•˜ì„¸ìš”</li><li>ê³µìœ  ë°©ë²•ì„ ì„ íƒí•˜ê³  ë³µì‚¬í•˜ê±°ë‚˜ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”</li><li>ë¸”ë¡œê·¸, ë…¸ì…˜, ì›¹ì‚¬ì´íŠ¸ì— ë¶™ì—¬ë„£ê¸° í•˜ì„¸ìš”!</li>',
        ctaText: 'ì•„ì§ ì†Œìš¸ íƒ€ì…ì„ ëª¨ë¥´ì‹œë‚˜ìš”?',
        ctaButton: 'ì†Œìš¸ íƒ€ì… í…ŒìŠ¤íŠ¸ í•˜ëŸ¬ ê°€ê¸°',
        copied: 'ë³µì‚¬ë¨!'
      },
      en: {
        widgetGenerator: 'Widget Generator',
        heroTitle: 'Show Off Your Soul Type!',
        heroDesc: 'Display your AI Soul Type on your blog, Notion, or website.<br>Create a widget and share your unique personality!',
        selectStyle: 'Select Style',
        cardStyle: 'Card',
        badgeStyle: 'Badge',
        miniStyle: 'Mini',
        selectType: 'Select Type',
        preview: 'Preview',
        shareMethod: 'How to Share',
        embedOption: 'Embed Code',
        embedDesc: 'For blogs & websites',
        linkOption: 'Direct Link',
        linkDesc: 'Copy & share anywhere',
        imageOption: 'Save Image',
        imageDesc: 'Download as PNG',
        snsOption: 'Share to SNS',
        snsDesc: 'Twitter, Facebook',
        copy: 'Copy',
        downloadImage: 'Download as Image',
        imageNote: 'Save as PNG and use on Instagram, KakaoTalk profile, etc.',
        howToUse: 'How to Use',
        instructionsList: '<li>Select your preferred widget style (Card/Badge/Mini)</li><li>Choose your soul type from the test result</li><li>Pick a sharing method and copy or download</li><li>Paste into your blog, Notion, or website!</li>',
        ctaText: "Don't know your soul type yet?",
        ctaButton: 'Take the Soul Type Test',
        copied: 'Copied!'
      },
      ja: {
        widgetGenerator: 'ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆä½œæˆ',
        heroTitle: 'ã‚ãªãŸã®ã‚½ã‚¦ãƒ«ã‚¿ã‚¤ãƒ—ã‚’è¦‹ã›ã‚ˆã†ï¼',
        heroDesc: 'ãƒ–ãƒ­ã‚°ã€Notionã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«AIã‚½ã‚¦ãƒ«ã‚¿ã‚¤ãƒ—ã‚’è¡¨ç¤ºã—ã¾ã—ã‚‡ã†ã€‚<br>ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ä½œæˆã—ã¦ã€ã‚ãªãŸã®å€‹æ€§ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ï¼',
        selectStyle: 'ã‚¹ã‚¿ã‚¤ãƒ«é¸æŠ',
        cardStyle: 'ã‚«ãƒ¼ãƒ‰',
        badgeStyle: 'ãƒãƒƒã‚¸',
        miniStyle: 'ãƒŸãƒ‹',
        selectType: 'ã‚¿ã‚¤ãƒ—é¸æŠ',
        preview: 'ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼',
        shareMethod: 'å…±æœ‰æ–¹æ³•',
        embedOption: 'åŸ‹ã‚è¾¼ã¿ã‚³ãƒ¼ãƒ‰',
        embedDesc: 'ãƒ–ãƒ­ã‚°/ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆç”¨',
        linkOption: 'ãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆãƒªãƒ³ã‚¯',
        linkDesc: 'ã©ã“ã§ã‚‚å…±æœ‰å¯èƒ½',
        imageOption: 'ç”»åƒã‚’ä¿å­˜',
        imageDesc: 'PNGã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',
        snsOption: 'SNSã§å…±æœ‰',
        snsDesc: 'Twitterã€Facebook',
        copy: 'ã‚³ãƒ”ãƒ¼',
        downloadImage: 'ç”»åƒã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰',
        imageNote: 'PNGã§ä¿å­˜ã—ã¦Instagramã€LINEãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãªã©ã«ä½¿ç”¨ã§ãã¾ã™ã€‚',
        howToUse: 'ä½¿ã„æ–¹',
        instructionsList: '<li>ãŠå¥½ã¿ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚¹ã‚¿ã‚¤ãƒ«ã‚’é¸æŠï¼ˆã‚«ãƒ¼ãƒ‰/ãƒãƒƒã‚¸/ãƒŸãƒ‹ï¼‰</li><li>ãƒ†ã‚¹ãƒˆçµæœã‹ã‚‰å‡ºãŸã‚½ã‚¦ãƒ«ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ</li><li>å…±æœ‰æ–¹æ³•ã‚’é¸ã‚“ã§ã‚³ãƒ”ãƒ¼ã¾ãŸã¯ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</li><li>ãƒ–ãƒ­ã‚°ã€Notionã€ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã«è²¼ã‚Šä»˜ã‘ï¼</li>',
        ctaText: 'ã¾ã ã‚½ã‚¦ãƒ«ã‚¿ã‚¤ãƒ—ã‚’çŸ¥ã‚‰ãªã„ï¼Ÿ',
        ctaButton: 'ã‚½ã‚¦ãƒ«ã‚¿ã‚¤ãƒ—ãƒ†ã‚¹ãƒˆã‚’å—ã‘ã‚‹',
        copied: 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼'
      },
      zh: {
        widgetGenerator: 'å°éƒ¨ä»¶ç”Ÿæˆå™¨',
        heroTitle: 'å±•ç¤ºä½ çš„çµé­‚ç±»å‹ï¼',
        heroDesc: 'åœ¨åšå®¢ã€Notionæˆ–ç½‘ç«™ä¸Šæ˜¾ç¤ºæ‚¨çš„AIçµé­‚ç±»å‹ã€‚<br>åˆ›å»ºå°éƒ¨ä»¶ï¼Œåˆ†äº«æ‚¨ç‹¬ç‰¹çš„ä¸ªæ€§ï¼',
        selectStyle: 'é€‰æ‹©æ ·å¼',
        cardStyle: 'å¡ç‰‡',
        badgeStyle: 'å¾½ç« ',
        miniStyle: 'è¿·ä½ ',
        selectType: 'é€‰æ‹©ç±»å‹',
        preview: 'é¢„è§ˆ',
        shareMethod: 'åˆ†äº«æ–¹å¼',
        embedOption: 'åµŒå…¥ä»£ç ',
        embedDesc: 'åšå®¢/ç½‘ç«™ç”¨',
        linkOption: 'ç›´æ¥é“¾æ¥',
        linkDesc: 'éšå¤„å¯åˆ†äº«',
        imageOption: 'ä¿å­˜å›¾ç‰‡',
        imageDesc: 'PNGä¸‹è½½',
        snsOption: 'SNSåˆ†äº«',
        snsDesc: 'Twitter, Facebook',
        copy: 'å¤åˆ¶',
        downloadImage: 'ä¸‹è½½å›¾ç‰‡',
        imageNote: 'ä¿å­˜ä¸ºPNGï¼Œå¯ç”¨äºInstagramã€å¾®ä¿¡å¤´åƒç­‰ã€‚',
        howToUse: 'ä½¿ç”¨æ–¹æ³•',
        instructionsList: '<li>é€‰æ‹©æ‚¨å–œæ¬¢çš„å°éƒ¨ä»¶æ ·å¼ï¼ˆå¡ç‰‡/å¾½ç« /è¿·ä½ ï¼‰</li><li>é€‰æ‹©æµ‹è¯•ç»“æœä¸­çš„çµé­‚ç±»å‹</li><li>é€‰æ‹©åˆ†äº«æ–¹å¼å¹¶å¤åˆ¶æˆ–ä¸‹è½½</li><li>ç²˜è´´åˆ°åšå®¢ã€Notionæˆ–ç½‘ç«™ï¼</li>',
        ctaText: 'è¿˜ä¸çŸ¥é“ä½ çš„çµé­‚ç±»å‹ï¼Ÿ',
        ctaButton: 'å»åšçµé­‚ç±»å‹æµ‹è¯•',
        copied: 'å·²å¤åˆ¶ï¼'
      },
      es: {
        widgetGenerator: 'Generador de Widget',
        heroTitle: 'Â¡Muestra tu Tipo de Alma!',
        heroDesc: 'Muestra tu Tipo de Alma AI en tu blog, Notion o sitio web.<br>Â¡Crea un widget y comparte tu personalidad Ãºnica!',
        selectStyle: 'Seleccionar Estilo',
        cardStyle: 'Tarjeta',
        badgeStyle: 'Insignia',
        miniStyle: 'Mini',
        selectType: 'Seleccionar Tipo',
        preview: 'Vista Previa',
        shareMethod: 'CÃ³mo Compartir',
        embedOption: 'CÃ³digo Embed',
        embedDesc: 'Para blogs y sitios web',
        linkOption: 'Enlace Directo',
        linkDesc: 'Copia y comparte en cualquier lugar',
        imageOption: 'Guardar Imagen',
        imageDesc: 'Descargar como PNG',
        snsOption: 'Compartir en SNS',
        snsDesc: 'Twitter, Facebook',
        copy: 'Copiar',
        downloadImage: 'Descargar como Imagen',
        imageNote: 'Guarda como PNG y Ãºsalo en Instagram, perfil de WhatsApp, etc.',
        howToUse: 'CÃ³mo Usar',
        instructionsList: '<li>Selecciona tu estilo de widget preferido (Tarjeta/Insignia/Mini)</li><li>Elige tu tipo de alma del resultado del test</li><li>Selecciona un mÃ©todo de compartir y copia o descarga</li><li>Â¡PÃ©galo en tu blog, Notion o sitio web!</li>',
        ctaText: 'Â¿AÃºn no conoces tu tipo de alma?',
        ctaButton: 'Hacer el Test de Tipo de Alma',
        copied: 'Â¡Copiado!'
      }
    };

    let currentLang = 'ko';
    let selectedShareMethod = 'embed';

    // Detect language
    function detectLanguage() {
      const urlParams = new URLSearchParams(window.location.search);
      const langParam = urlParams.get('lang');
      if (langParam && i18n[langParam]) return langParam;

      const saved = localStorage.getItem('ai-life-summary-lang');
      if (saved && i18n[saved]) return saved;

      const browserLang = navigator.language.split('-')[0];
      return i18n[browserLang] ? browserLang : 'ko';
    }

    function t(key) {
      return (i18n[currentLang] && i18n[currentLang][key]) || i18n.en[key] || key;
    }

    function applyTranslations() {
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.innerHTML = t(key);
      });
      document.querySelectorAll('[data-i18n-html]').forEach(el => {
        const key = el.getAttribute('data-i18n-html');
        el.innerHTML = t(key);
      });
    }

    // Share method switching
    function setupShareOptions() {
      document.querySelectorAll('.share-option').forEach(option => {
        option.addEventListener('click', () => {
          const method = option.dataset.share;
          selectedShareMethod = method;

          // Update UI
          document.querySelectorAll('.share-option').forEach(o => o.classList.remove('active'));
          option.classList.add('active');

          // Show/hide content
          document.querySelectorAll('.share-content').forEach(c => c.style.display = 'none');
          document.getElementById(`share-${method}`).style.display = 'block';
        });
      });
    }

    // Copy functionality
    function setupCopyButtons() {
      document.querySelectorAll('[data-copy]').forEach(btn => {
        btn.addEventListener('click', async () => {
          const type = btn.dataset.copy;
          let text = '';

          if (type === 'embed') {
            text = document.getElementById('embed-code').textContent;
          } else if (type === 'link') {
            text = document.getElementById('direct-link').value;
          }

          try {
            await navigator.clipboard.writeText(text);
            const originalText = btn.textContent;
            btn.textContent = t('copied');
            btn.classList.add('copied');

            setTimeout(() => {
              btn.textContent = t('copy');
              btn.classList.remove('copied');
            }, 2000);
          } catch (err) {
            console.error('Copy failed:', err);
          }
        });
      });
    }

    // Image download
    function setupImageDownload() {
      document.getElementById('download-btn')?.addEventListener('click', async () => {
        const previewArea = document.getElementById('preview-area');
        const widget = previewArea.querySelector('.widget-card, .widget-badge, .widget-mini');

        if (!widget) return;

        try {
          const canvas = await html2canvas(widget, {
            backgroundColor: null,
            scale: 2
          });

          const link = document.createElement('a');
          link.download = `my-soul-type-${widgetGenerator.selectedType}.png`;
          link.href = canvas.toDataURL('image/png');
          link.click();
        } catch (err) {
          console.error('Download failed:', err);
          alert('ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        }
      });
    }

    // SNS share
    function setupSNSShare() {
      const shareUrl = 'https://smartaitest.com/soul-type/';
      const shareText = currentLang === 'ko'
        ? 'ë‚˜ì˜ AI ì†Œìš¸ íƒ€ì…ì„ í™•ì¸í•´ë³´ì„¸ìš”!'
        : 'Check out my AI Soul Type!';

      document.getElementById('share-twitter')?.addEventListener('click', () => {
        const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;
        window.open(url, '_blank', 'width=550,height=420');
      });

      document.getElementById('share-facebook')?.addEventListener('click', () => {
        const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
        window.open(url, '_blank', 'width=550,height=420');
      });
    }

    // Update direct link
    function updateDirectLink() {
      const soulType = widgetGenerator.soulTypes?.find(t => t.id === widgetGenerator.selectedType);
      if (!soulType) return;

      const embedUrl = `https://smartaitest.com/widget/embed.html?type=${widgetGenerator.selectedType}&style=${widgetGenerator.selectedStyle}&lang=${currentLang}`;
      document.getElementById('direct-link').value = embedUrl;
    }

    // Override updateCode to also update direct link
    const originalUpdateCode = WidgetGenerator.prototype.updateCode;
    WidgetGenerator.prototype.updateCode = function() {
      originalUpdateCode.call(this);
      updateDirectLink();
    };

    // Initialize
    function init() {
      currentLang = detectLanguage();
      applyTranslations();

      // Initialize widget generator
      widgetGenerator.initialize(currentLang);

      // Setup additional features
      setupShareOptions();
      setupCopyButtons();
      setupImageDownload();
      setupSNSShare();
      updateDirectLink();
    }

    document.addEventListener('DOMContentLoaded', init);
  </script>

  <!-- Microsoft Clarity -->
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "CLARITY_ID");
  </script>
</body>
</html>
